![[Pasted image 20250903175629.png]]
## 一、基本运算（5种）

### 1. 选择（Selection，σ）

**作用**：从一张表（关系）中挑出满足条件的元组（行）。  
**记法**：σ<sub>条件</sub>(R)  
**例子**：  
R(学号, 姓名, 系号)  
σ<sub>系号='D01'</sub>(R) → 找出所有属于 D01 系的学生。  
**SQL 对应**：`SELECT * FROM R WHERE 系号='D01';`

---

### 2. 投影（Projection，π）

**作用**：从一张表中挑选部分列（属性），去掉重复行。  
**记法**：π<sub>属性列表</sub>(R)  
**例子**：  
π<sub>姓名, 系号</sub>(R) → 只保留学生的姓名和系号列。  
**SQL 对应**：`SELECT DISTINCT 姓名, 系号 FROM R;`

---

### 3. 并（Union，∪）

**作用**：合并两个关系，保留所有元组（去重）。  
**条件**：两个关系必须**相容**（列数和类型相同）。  
**例子**：  
R1(学号, 姓名)，R2(学号, 姓名)  
R1 ∪ R2 → R1 和 R2 学生集合的并集。  
**SQL 对应**：`SELECT * FROM R1 UNION SELECT * FROM R2;`

---

### 4. 差（Difference，−）

**作用**：返回在 R1 中但不在 R2 中的元组。  
**条件**：两个关系必须相容。  
**例子**：  
R1 − R2 → 在 R1 里但不在 R2 的学生。  
**SQL 对应**：`SELECT * FROM R1 EXCEPT SELECT * FROM R2;`

---

### 5. 笛卡尔积（Cartesian Product，×）

**作用**：将 R1 和 R2 的每一行组合成一条新元组。  
**例子**：  
学生(学号, 姓名)，课程(课程号, 课程名)  
学生 × 课程 → 得到每个学生和每门课的所有组合。  
**SQL 对应**：`SELECT * FROM 学生, 课程;`

---

## 二、常用扩展运算

### 6. 连接（Join，⋈）

**作用**：先做笛卡尔积，再按条件选出匹配的元组。

- **θ连接**：带条件的连接，例如 R1 ⋈<sub>R1.系号=R2.系号</sub> R2。
    
- **自然连接（⋈）**：自动按相同属性名匹配。  
    **例子**：  
    学生(学号, 姓名, 系号) ⋈ 系(系号, 系名)  
    → 得到学生和系名合并后的表。  
    **SQL 对应**：
    

`SELECT 学生.学号, 姓名, 系.系号, 系名 FROM 学生 JOIN 系 ON 学生.系号 = 系.系号;`

---

### 7. 交（Intersection，∩）

**作用**：返回同时属于 R1 和 R2 的元组。  
**SQL 对应**：`SELECT * FROM R1 INTERSECT SELECT * FROM R2;`

---

### 8. 除（Division，÷）

**作用**：用来表达“对于所有”的查询。  
**例子**：

- 关系 R1(学生, 课程)，R2(课程)。
    
- R1 ÷ R2 → 找出选修了 **R2 所有课程**的学生。  
    **SQL 对应**：需要用 `NOT EXISTS` 或 `GROUP BY + HAVING COUNT` 来实现。
    

---

## 三、记忆图谱

- **筛行 → 选择 σ**
    
- **筛列 → 投影 π**
    
- **并 ∪ / 差 − / 交 ∩** → 集合运算
    
- **全组合 × → 连接 ⋈**
    
- **除 ÷** → “所有情况都满足”
    

---

✅ **总结**：

- **基本五种**：选择 σ、投影 π、并 ∪、差 −、笛卡尔积 ×
    
- **扩展运算**：连接 ⋈、交 ∩、除 ÷
    
- **自然连接（⋈）** 是最常见的，SQL 的 `JOIN` 就是它的实现。